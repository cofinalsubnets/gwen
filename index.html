<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gwen.js demo</title>
    <style>
      * { line-height: 1.4em; font-family: monospace,sans-serif; }
      body { margin: 1em; max-width: 60em; background: hsl(220, 90%, 80%); color: #222; }
      a:hover { text-decoration: none; }
      ul > li { list-style-type: "â€” "; }
      ul { padding-left: 2em; }
      table { border: 1px solid black; border-collapse: collapse; }
      td, th { border: 1px solid black; padding: 0.5em;}
      textarea { margin-top: 1em; margin-bottom: 1em; }
    </style>
    <script src='gwen.js'></script>
    <script>
      window.addEventListener('load', () => {
        const input = document.getElementById('input'),
              button = document.getElementById('eval'),
              { show, eval, read } = gwen;
        button.addEventListener('click', () => {
          try {
            alert(show(eval(read(input.value))));
          } catch (e) {
            alert(e);
          }
        });
      });
    </script>
  </head>
  <body>
    <h1>gwen.js demo</h1>
    <p>this is an interpreter for gwen written in javascript</p>
    <ul>
      <li><a href="https://github.com/cofinalsubnets/gwen">gwen</a></li>
      <li><a href="https://github.com/cofinalsubnets/gwen/blob/main/gwen.js">gwen.js</a></li>
    </ul>
    <p>type an expression in the text box below and press eval...</p>
    <p>there are five special forms that are pretty close to their scheme counterparts:</p>
    <table>
      <thead>
        <tr><th scope=col>gwen</th><th scope=col>scheme</th></tr>
      </thead>
      <tbody>
        <tr><td><code>`</code></td><td><code>quote</code></td></tr>
        <tr><td><code>?</code></td><td><code>cond</code></td></tr>
        <tr><td><code>\</code></td><td><code>lambda</code></td></tr>
        <tr><td><code>:</code></td><td><code>let*</code></td></tr>
        <tr><td><code>,</code></td><td><code>begin</code></td></tr>
      </tbody>
    </table>
    <textarea type='text' rows=6 cols=80 id='input'>(: (fib n) (? (&lt; n 3) 1 (+ (fib (- n 1)) (fib (- n 2)))) (fib 20))</textarea>
    <div><button id='eval'>eval</button></button>
  </body>
</html>
