(test logic
 (all (L 1 1 1 1 1) id)
 (nilp (all (L 1 1 0 1 1) id))
 (any (L 1 1 0 1 1) id)
 (nilp (any (L 0 0 0 0 0) id))
 (nilp (&& 1 2 0 4))
 (&& 1 2 3 4 (&&))
 (|| 0 0 1 0)
 (nilp (|| (|| 0) (||)))
 (:
    none (co any nilp)
    (bools n) (? (= 0 n) '((0) (-1))
     (>>= (bools (- n 1)) (\ q
      (flat-map q (\ b (map q (\ c (append b c))))))))
    (de-morgan a .) (= (all a id) (none a nilp))
  (all (bools 3) (cu ap de-morgan)))
 (: box (tbl)
    (set x) (tset box 0 x)
    (get) (box 0)
    (mut f) (set (f (get)))
    (inc x) (X 0 x)
    (fn i) (, (mut inc) i)
  ; test short-circuiting
  (&&
   (, (&& (fn 1) (fn 2) (fn 0) (fn 4))
      (= 3 (len (get))))
   (, (|| (fn 1) (fn 2) (fn 3))
      (= 4 (len (get)))))))
