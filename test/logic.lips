(test logic
 (all (L 1 1 1 1 1) id)
 (~ (all (L 1 1 () 1 1) id))
 (any (L 1 1 () 1 1) id)
 (~ (any (L () () () () ()) id))
 (~ (&& 1 2 () 4))
 (&& 1 2 3 4 (&&))
 (|| () () 1 ())
 (~ (|| (|| ()) (||)))
 (: t (~ ())
    none (co any ~)
    (bools n) (? (= 0 n) (L (L ()) (L t))
     (: q (bools (- n 1))
      (flatmap q (\ b (qap (\ c (cat b c)) q)))))
    (de-morgan a .) (= (all a id) (none a ~))
  (all (bools 3) (cu ap de-morgan)))
 (: box (tbl)
    (set x) (tset box () x)
    (get) (tget box ())
    (mut f) (set (f (get)))
    (inc x) (X () x)
    (fn i) (, (mut inc) i)
  ; test short-circuiting
  (, (&& (fn 1) (fn 2) (fn ()) (fn 4))
     (= 3 (len (get))))
  (, (|| (fn 1) (fn 2) (fn 3))
     (= 4 (len (get))))))
