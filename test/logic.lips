(test logic
 (all id (L 1 1 1 1 1))
 (~ (all id (L 1 1 () 1 1)))
 (any id (L 1 1 () 1 1))
 (~ (any id (L () () () () ())))
 (~ (&& 1 2 () 4))
 (&& 1 2 3 4 (&&))
 (|| () () 1 ())
 (~ (|| (|| ()) (||)))
 (: t (~ ())
    none (co (flip any) ~)
    (bools n) (? (= 0 n) (L (L ()) (L t))
     (: q (bools (- n 1))
      (flat-map q (\ b (map (\ c (cat b c)) q)))))
    (de-morgan a .) (= (all id a) (none a ~))
  (all (cu ap de-morgan) (bools 3)))
 (: box (tbl)
    (set x) (tset box () x)
    (get) (tget box ())
    (mut f) (set (f (get)))
    (inc x) (X () x)
    (fn i) (, (mut inc) i)
  ; test short-circuiting
  (, (&& (fn 1) (fn 2) (fn ()) (fn 4))
     (= 3 (len (get))))
  (, (|| (fn 1) (fn 2) (fn 3))
     (= 4 (len (get))))))
