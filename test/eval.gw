(assert
 (= 1 (ev 1))
 (= 0 (ev '(,)))
 (= 1 (ev '(, 1)))
 (= 7 (ev '(, 1 2 3 4 5 6 7)))
 (= 'a (ev 'a))
 (= ''a (ev '''a))
 (= 'a (ev '(, 1 2 a)))
 (= 0 (ev '(?)))
 (= 9 (ev '(? 9)))
 (= 0 (ev '(:)))
 (= 9 (ev '(: (+ 5 4))))
 (= 0 (ev '(\)))
 (= 3 (ev '(\ (? (: (, 1 2 3))))))
 (= -1 (ev '(- 1 2)))
 (= 1 (ev (L - 2 1)))
 (= 12 (ev '(* 3 (+ 3 1))))
 (= 2 (ev '(? 0 1 2)))
 (= 5 (ev '(? (= 1 5) 1 (= 2 5) 2 (= 3 5) 3 (= 4 5) 4 (= 5 5) 5)))
 (= '(1 2 3) (ev '(L 1 2 3)))
 (= 15 (ev '(\ a (* 3 (+ 2 3))) 0))
 (= 15 (ev '(\ a ((\ a (* 3 (+ 2 3))) 0)) 0))
 (= 9 (ev '(\ a a) 9))
 (= 9 (ev '((\ a a) 9)))
 (= 9 (ev '((\ a b (+ b a)) 4) 5))
 (= 6 (ev '((\ a b (- b a)) 10) 16))
 (= 9 (ev '(\ a b (? b (* a 3) (+ a 2))) 3 1))
 (= 9 (ev '(: a 2 a (+ 3 a) (+ 4 a))))
 (= 9 (ev '(: a 9 a)))
 (= 7 (ev '(: a 9 b 7)))
 (= 9 a)
 (= 7 b)
 (= 3 (ev '(: a 9 3)))
 (= 3 (ev '(: a 9 (+ a)) -6))
 (= 4 (ev '(: a 2 (+ a a))))
 (= 9 (ev '(: a 4 b 5 (+ a b))))
 (= 48 (ev '(: a 9 b 3 c 8 (* c (- a b)))))
 (= 48 (ev '(: a 9 b (- a 6) c (* 8 (- a b)) c)))
 (= '(1 3 5) (ev '(: (evens m) (? (atomp m) 0 (odds (B m))) (odds n) (? (atomp n) 0 (X (A n) (evens (B n)))) (odds '(1 2 3 4 5 6)))))
 (= 7 (ev '(: a 1 b 3 c 2 (f x) (+ a x) (g x) (f (* b x)) (g c))))
 (= '(4 3 2 1) (ev '(: (f o i) (? i (f (X (A i) o) (B i)) o) (f 0)) '(1 2 3 4)))
 (= 0 (ev '(\ x (: (f n) (- x n))) 5 5))
 (= 44 (ev '(\ x y z (: q z (f r) (- (* x (+ y r)) q))) 5 9 6 1))
 (= 9 (ev '(\ n (: t (tnew 0) (, (tset t 'k n) (tget 0 t)))) 9 'k))
 (= 44 (ev evaluator evaluator '(\ x y z (: q z (f r) (- (* x (+ y r)) q))) 5 9 6 1))
 (= '(3 4) (ev '(: (a x l) (? l (? (= x (AA l)) (A l) (a x (B l))))) 3 '((1 2) (2 3) (3 4) (4 5))))
)
