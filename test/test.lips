(test equality
 (=  (~())
  (= 0 0)
  (= (L 0 0) (X 0 (X 0 ()))))
 (= ()
  ((\ x (= 1 x x x)) 0)
  ((\ x (= x 1 x x)) 0)
  ((\ x (= x x 1 x)) 0)
  ((\ x (= x x x 1)) 0))
 (= 'a 'a)
 (= "a" "a")
 (~ (= (ygen) (ygen))))
 
(test "special forms"
 (= () (,) (:) (?) (`) ((\)) (? () 1))
 (= 1 (, 1) (? 1) ((\ 1)) '1 (: 1))
 (= 3 (, 1 2 3))
 (= 3 (: a 1 b 2 (+ a b)))
 (= 1 ((\ x x) 1))
 (= -5 ((\ f x (f x)) - 5))
 (= (L 1 2 3) ((\ x xs . (X x xs)) 1 2 3))
 (= 2 (? 1 2))
 (= 1 (? 0 1 2))
 (= 2 (? () 1 2))
 (= 4 (? () 1 () 2 () 3 4)))

(test "string manipulation"
 (= 4 (slen "slen"))
 (= "ystr" (ystr 'ystr))
 (= 'ssym (ssym "ssym"))
 (~ (ystr (ygen)))
 (= "xxx" "xxx")
 (~ (= "xxx" "yyy"))
 (= "hollow world" (scat "hol" "low " "wor" "ld"))
 (= "bidden" (ssub "forbidden planet" 3 9))
 (= "" (str))
 (= 97 (char "a"))
 (= (L 97) (chars "a"))
 (= "a" (str 97))
 (= "asdfqwer" (ap str (chars "asdfqwer"))))


(test execution
 (= 1 (ccc (\ k (, (k 1) 2))))
 (= 2178309 ;; double recursive fibonacci function
  (>>= 32 (: (fib n)
   (? (< n 3) 1
    (+ (fib (- n 1)) (fib (- n 2)))))))
 (= 4093 ;; ackermann function
  (>>= 3 9 (: (ack m n)
    (? (< m 1) (+ n 1)
     (ack (- m 1) (? (> n 0) (ack m (- n 1)) 1))))))

 ((\ q (= q (ev q)))
  ((\ q ((ev q) q))
   '(\ q (L q (L'` q))))))

(: (even x) (? (= 0 (& x 1)))
   (odd x)  (? (= 1 (& x 1))))
(test "library functions"
 (= '((0 2 4) 1 3 5)
  (part '(0 1 2 3 4 5) even))
 (all '(0 2 4 8) even)
 (any '(0 2 4 9) odd)
 (~ (= 1 1 2))
 (= '(0 2 4) (filter (iota 0 6) even))
 (= '(3 2 3 3 2 3 3 2 3)
  (rho 3 3 2 3)
  (intercal '(3 2 3) (rho 2 '(3 2 3))))
 (= '(0 1 2 3)
  (iota 4)
  (iota 0 4)
  (ldel (iota 5) 4)
  (snoc (iota 3) 3))
 (= 2 (idx (iota 9) 2) (len (iota 2)))
 (= id (id id) ((const id) const))
 (= (iota 2 9) (memq (iota 9) 2))
 (~ (memq (iota 9) 9))
 (= 13 ((co (cu * 2) (cu + 5)) 4))
 (= '(3 2 1 0 1 2 3) (cat (rev (iota 4)) (iota 1 4))))


