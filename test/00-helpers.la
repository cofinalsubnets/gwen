;(. 0 'helpers)
(:
 (term-esc string) (puts (ap str (X 27 (chars string))))
 (green) (term-esc "[32m")
 (red)   (term-esc "[31m")
 (reset) (term-esc "[0m")

 (color-text col s) (, (col) (puts s) (reset))
 (green-text s) (color-text green s)
 (red-text s) (color-text red s))

(: *tests* (tbl)
   *test-failures* (tbl))
(:
 (mut n f) (tset *test-failures* n
  (f (*test-failures* n)))
 (:::
  test (:
   (\ n ts . (:
    (Te x) (L '? x (L ', (L green-text "."))
     (L ', (L mut (Q n) (cu X x)) (L red-text "X")))
    (X ', (map ts Te))
    )))))

